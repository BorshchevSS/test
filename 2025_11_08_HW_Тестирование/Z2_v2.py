"""Задание 2
Задача: создать функцию word_count(s), которая принимает строку и
возвращает словарь, где ключи — слова из строки, а значения —
количество их вхождений. Тесты должны проверять:
• корректность подсчёта слов;
• игнорирование регистра при подсчёте;
• работу функции с пустой строкой."""

import re


def word_count(s):
    """
    Подсчитывает количество вхождений каждого слова в строке.

    Args:
        s (str): Входная строка для анализа

    Returns:
        dict: Словарь, где ключи - слова в нижнем регистре,
              значения - количество их вхождений
    """
    if not s or not s.strip():
        return {}

    # Разбиваем строку на слова, игнорируя знаки препинания и лишние пробелы
    words = re.findall(r'\b\w+\b', s.lower())

    # Подсчитываем вхождения каждого слова
    count_dict = {}
    for word in words:
        count_dict[word] = count_dict.get(word, 0) + 1

    return count_dict


def word_count_simple(s):
    """
    Упрощенная версия без использования регулярных выражений.
    """
    if not s or s.isspace():
        return {}

    # Приводим к нижнему регистру и разбиваем на слова
    words = s.lower().split()

    # Очищаем слова от знаков препинания
    clean_words = []
    for word in words:
        # Убираем знаки препинания с начала и конца слова
        clean_word = word.strip('.,!?;:"()[]{}')
        if clean_word:  # Если после очистки что-то осталось
            clean_words.append(clean_word)

    # Подсчитываем вхождения
    count_dict = {}
    for word in clean_words:
        count_dict[word] = count_dict.get(word, 0) + 1

    return count_dict

"""Ключевые особенности реализации:

1. Игнорирование регистра: Все слова приводятся к нижнему регистру
2. Обработка пустой строки: Возвращается пустой словарь
3. Работа с пунктуацией: Знаки препинания игнорируются при подсчете
4. Множественные пробелы: Обрабатываются корректно
5. Тестовое покрытие: Проверяются все основные сценарии"""


#Тесты
str_1 = """Не жалею, не зову, не плачу,
Все пройдет, как с белых яблонь дым.
Увяданья золотом охваченный,
Я не буду больше молодым.
Ты теперь не так уж будешь биться,
Сердце, тронутое холодком,
И страна березового ситца
Не заманит шляться босиком.
Дух бродяжий! ты все реже, реже
Расшевеливаешь пламень уст
О моя утраченная свежесть,
Буйство глаз и половодье чувств.
Я теперь скупее стал в желаньях,
Жизнь моя? иль ты приснилась мне?
Словно я весенней гулкой ранью
Проскакал на розовом коне.
Все мы, все мы в этом мире тленны,
Тихо льется с кленов листьев медь…
Будь же ты вовек благословенно,
Что пришло процвесть и умереть."""

print(word_count(str_1))
print("\n")
print(word_count_simple(str_1))